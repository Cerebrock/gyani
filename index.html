 <!DOCTYPE html>
 <meta charset="UTF-8">
 <html>
  <head>
    <title>Con-ciencia</title>
    <link rel="icon" type="image/png" href="static/media/misc/favicon.ico">
    <link rel="stylesheet" href="static/jspsych/css/jspsych.css"></link>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.283.1.min.js"></script>
    <script src="static/jspsych/jspsych.js"></script>
    <script src="static/jspsych/plugins/jspsych-html-button-response.js"></script>
    <script src="static/jspsych/plugins/jspsych-survey-likert.js"></script>
    <script src="static/jspsych/plugins/jspsych-survey-text.js"></script>
    <script src="static/jspsych/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="static/jspsych/plugins/jspsych-survey-multi-select.js"></script>
    <script src="static/jquery-3.3.1.js"></script>
  </head>
  <body></body>
  <script>
  
  // Preamble

  var welcome = {
    type: "html-button-response",
    stimulus: "<font size=5.5><p>¡Bienvenido!</p><p>"+
    "<p>Te haremos algunas preguntas sobre tu práctica profesional.<p>Procurá estar en un ambiente tranquilo y prestar la mayor atención posible.</p>",
    trial_duration: 900000,
    choices: ['Continuar'],
    };
  
  var consent = {
    type: "html-button-response",
    stimulus: "<font size=5.5><p>Continuando con el experimento aceptás aportar los datos generados, ayudándonos en nuestra labor de curiosidad científica. </p>"+
    "<p>Si ya juntaste la valentía suficiente, focalizá tu atención todo lo que puedas... y continuá</p>",
    choices : ['Continuar'],
    };
  
  // Demography 

  var demography = {
      type: 'survey-text',
      questions: [
        {prompt: 'What is your age?', value: '', columns: 10,required:true},
        {prompt: 'What is your birth gender?', value: '', columns: 10, required:true},
        {prompt: 'How many years of clinical experience do you have?', value: '', columns: 10,required:true},
        {prompt: 'What is the maximum level of education you have attained?', value: '', columns: 10, required:true},
        {prompt: 'How many hours per week do you spend with patients?', value: '', columns: 10, required:true},
      ],
      button_label: 'Continuar',
  }; 

  // Theoretical Orientation
  var theoretical_orientation_ticks = {
    type: 'survey-multi-select',
    preamble: `Theoretical Orientation`,
    questions: [{
        prompt: "Theoretical Orientation", 
        options: ["humanistic/experiential","cognitive/behavioral","family-based interventions","art, drama or music (creative arts)", 
                  "eye movement desensitization and reprocessing","psychodynamic","cognitive analytical theory","eclectic"], 
        horizontal: false,
        required: true,
        name: 'Orientation'
      }],
    button_label: 'Continue',
  };

  var theoretical_orientation_box = {
    type: 'survey-text',
    questions: [
      {prompt: "Other:"}]};
  
  // Workplace
  var workplace_ticks = {
    type: 'survey-multi-select',
    preamble: '',
    questions: [{
        prompt: "Do you work in...", 
        options: ["NHS", "Private Practice", "Both", "Other"], 
        horizontal: false,
        required: true,
      }],
    button_label: 'Continue',
  };

  var workplace_box = {
    type: 'survey-text',
    questions: [
      {prompt: "Other:"}]};
  

  // Influence
  scale = ["Not at all influential", "Sometimes", "Extremely Influential"]
  var influence = {
    type: 'survey-multi-choice',
    preamble: 'How influential was each of the following in deciding your favoured theoretical orientation?',
    questions: [{prompt:'Research evidence', options: scale, horizontal:true, required:true},
		{prompt:'Personal experience with clients', options: scale, horizontal:true, required:true},
		{prompt:'Clinical training', options: scale, horizontal:true, required:true},
		{prompt:'The treatment’s appeal to clients', options: scale, horizontal:true, required:true},
		{prompt:'Intuition', options: scale, horizontal:true, required:true},
		{prompt:'Past experience with personal therapy', options: scale, horizontal:true, required:true}],
    button_label: 'Continue',
  };

  // Sources
  scale = ["Never", "Sometimes", "Always"]
  var sources = {
    type: 'survey-multi-choice',
    preamble: 'Which sources do you currently use to increase your skills and effectiveness as a clinician?',
    questions: [{prompt:'Personal experience with clients', options: scale, horizontal:true, required:true},
		{prompt:'Empirical research from controlled trials', options: scale, horizontal:true, required:true},
		{prompt:'Supervision', options: scale, horizontal:true, required:true},
		{prompt:'Empirical research from case studies', options: scale, horizontal:true, required:true},
		{prompt:'Peer discussion', options: scale, horizontal:true, required:true},
		{prompt:'Popular books', options: scale, horizontal:true, required:true},
		{prompt:'Clinical case observations', options: scale, horizontal:true, required:true},
		{prompt:'Outcome measures', options: scale, horizontal:true, required:true},
		{prompt:'Clinical guidelines', options: scale, horizontal:true, required:true}],
    button_label: 'Continue',
  };

  // Research Attitudes
  scale = ["Strongly disagree", "Neutral", "Strongly agree"]
  var research_attitudes_1 = {
    type: 'survey-multi-choice',
    preamble: 'Which sources do you currently use to increase your skills and effectiveness as a clinician?',
    questions: [{prompt:'I am willing to use new and different types of therapy developed by researchers', options: scale, horizontal:true, required:true},
		{prompt:'My clients are more complex and diverse than those in clinical trials', options: scale, horizontal:true, required:true},
		{prompt:'It is my professional duty to keep up with new developments in treatment research', options: scale, horizontal:true, required:true},
		{prompt:'My clients prefer other treatments than evidence based treatments', options: scale, horizontal:true, required:true},
		{prompt:'My training emphasized research findings therapy cannot be manualised', options: scale, horizontal:true, required:true},
		{prompt:'My supervisors require me to use evidence based treatments*', options: scale, horizontal:true, required:true},
		{prompt:'The diagnoses used in treatment trials are too simple', options: scale, horizontal:true, required:true},
		{prompt:'Evidence based treatments are cost effective the treatments i favour have not been tested in a randomized controlled trial', options: scale, horizontal:true, required:true},
		{prompt:'I may attract new clients by learning an evidence based treatment', options: scale, horizontal:true, required:true},
		{prompt:'I have an individual treatment approach for each client', options: scale, horizontal:true, required:true}],
    button_label: 'Continue',
	};

  var research_attitudes_2 = {
    type: 'survey-multi-choice',
    preamble: 'Which sources do you currently use to increase your skills and effectiveness as a clinician? (cont.)',
    questions: [{prompt:'It is important to incorporate scientific findings into my everyday practice', options: scale, horizontal:true, required:true},
		{prompt:'I do not have the time to learn evidence based treatments', options: scale, horizontal:true, required:true},
		{prompt:'I would try a new therapy even if it was very different from what i am used to doing', options: scale, horizontal:true, required:true},
		{prompt:'Training in evidence based treatments would cost me too much money personally', options: scale, horizontal:true, required:true},
		{prompt:'I am interested in learning evidence based treatments i do not know which treatments are evidence based', options: scale, horizontal:true, required:true},
		{prompt:'The treatments i use with my clients have an empirical basis', options: scale, horizontal:true, required:true},
		{prompt:'My clinical training did not provide sufficient information about evidence based treatments', options: scale, horizontal:true, required:true},
		{prompt:'The therapeutic alliance is more important than learning how to do a specific form of psychotherapy', options: scale, horizontal:true, required:true},
		{prompt:'Most therapies are equally effective', options: scale, horizontal:true, required:true},
		{prompt:'My employer does not have the funds for training in evidence based treatments*', options: scale, horizontal:true, required:true},
		{prompt:'Clinical experience is more important as a guide to treatment than research evidence', options: scale, horizontal:true, required:true}],
    button_label: 'Finish',
	};


  // AWS

  var s3 = new AWS.S3();
  var BucketName = "unket";
  var bucketRegion = "eu-west-1";
  var IdentityPoolId = "eu-west-1:f41d7b21-fb70-4056-aca7-09166a386768";
  var fileName = 'test.json'; 
  AWS.config.update({
	  region: bucketRegion,
	  credentials: new AWS.CognitoIdentityCredentials({
	    IdentityPoolId: IdentityPoolId
	  })
	});

  //
	
  jsPsych.init({
    timeline: [welcome, consent, demography, theoretical_orientation_ticks, theoretical_orientation_box,
              workplace_ticks, workplace_box, influence, sources, research_attitudes_1, research_attitudes_2],


s3.putObject({Bucket: 'bucket_name', 
	      Key: 'my_products.json',Body: JSON.stringify(products), ContentType: "application/json"},function(err, data){console.log(JSON.stringify(err)+" "+JSON.stringify(data));});


    on_finish: function() {s3.putObject({
			  Bucket: BucketName,
			  Key: fileName,
			  Body: JSON.stringify(jsPsych.data.get().json()),
			  ContentType: "application/json",
			  function (err,data) {console.log(JSON.stringify(err) + " " + JSON.stringify(data));
                                              } 
                                        }); window.location = 'https://cerebrock.github.io/'
                          }
              });
</script>
</html>


