<!DOCTYPE html>
<meta charset="UTF-8">
<html>
  <head>
    <title>Con-ciencia</title>
    <link rel="icon" type="image/png" href="static/media/misc/favicon.ico">
    <link rel="stylesheet" href="static/jspsych/css/jspsych.css"></link>
    <script src="static/jspsych/jspsych.js"></script>
    <script src="static/jspsych/plugins/jspsych-html-button-response.js"></script>
    <script src="static/jspsych/plugins/jspsych-survey-likert.js"></script>
    <script src="static/jspsych/plugins/jspsych-survey-text.js"></script>
    <script src="static/jspsych/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="static/jspsych/plugins/jspsych-survey-multi-select.js"></script>
    <script src="static/jquery-3.3.1.js"></script>
  </head>
  <body></body>
  <script>
  
  // Cada variable define una pantalla en el experimento
  // La secuencia de variables se guarda abajo en la variable "timeline" de jspsych
  
  // Preamble
  var welcome = {
    type: "html-button-response",
    stimulus: "<font size=5.5><p>¡Bienvenido!</p><p>"+
    "<p>Te haremos algunas preguntas sobre tu práctica profesional.<p>Procurá estar en un ambiente tranquilo y prestar la mayor atención posible.</p>",
    trial_duration: 900000,
    choices: ['Continuar'],
    };
  
  var consent = {
    type: "html-button-response",
    stimulus: "<font size=5.5><p>Continuando con el experimento aceptás aportar los datos generados, ayudándonos en nuestra labor de curiosidad científica. </p>"+
    "<p>Si ya juntaste la valentía suficiente, focalizá tu atención todo lo que puedas... y continuá</p>",
    choices : ['Continuar'],
    };
  
  // Demography 
  var demography = {
      type: 'survey-text',
      questions: [
        {prompt: 'Cuál es su edad?', columns: 10, required:true},
        {prompt: 'Género', columns: 10, required:true},
        {prompt: 'Cuántos años de experiencia clínica posee?', columns: 10, required:true},
        {prompt: 'Nivel máximo de educación alcanzado', columns: 10, required:true},
        {prompt: 'Cuántas horas por semana pasa con pacientes?', columns: 10, required:true},
      ],
      required:true,
      button_label: 'Continuar',
  }; 
  // Theoretical Orientation
  var theoretical_orientation_ticks = {
    type: 'survey-multi-select',
    preamble: `Orientación Teórica`,
    questions: [{
        prompt: "", 
        options: ["Humanista","Conductual","Cognitivo-Conductual","Sistémica","Psicodrama/Musicoterapia", 
                  "EMDR","Psicodinámica","Psicoanálisis","Ecléctica (de todo un poco)", "Otra"], 
        horizontal: false,
        required: true,
        name: 'orientacion'
      }],
    button_label: 'Continuar'};

  // Aca hacemos los condicionales
  // Guardamos una pantalla, ej. la de tcc en otra variable, if_tcc, 
  // que tiene una función condicional que evalúa si corresponde o no. 
  // Esta funcion ahora busca si una palabra, ej. "Cognitivo", se encontró en las respuestas de una etapa previa
  // Para la orientación, que es la 4ta pregunta, usa .first(4).values()[3]
  // O para la última inmediata .last().values()[0]  
      
  var tcc = {
    type: 'survey-multi-select',
    preamble : '',
    questions: [{
        prompt: '',
        options: ["Análisis Conductual Aplicado", "Terapia Racional Emotiva (Ellis)", "Terapia Cognitiva (Beck)", "Terapia de Conducta (Wolpe, Marie Cover Jones)",
         "Terapia de Aceptación y Compromiso", "Terapia Dialéctico Conductual", "Terapia Analítico Funcional", "Terapia basada en Mindfulness", "Otra"],
        horizontal: false,
        required: true}],    
    button_label: 'Continuar'};    
  var if_tcc = {
   timeline : [tcc],   
   conditional_function: function(){
      if ((jsPsych.data.get().first(4).values()[3]['responses'].indexOf('Cognitivo') >= 0)){
        return true;
      } else {
        return false;
      }}};
      
  var psan = {
    type: 'survey-multi-select',
    questions: [{
        prompt: '',
        options: ["Lacaniano", "Freudiano", "Psicodinámica", "Kleiniano", "Psicología analítica (junguiana)", "Otra"],
        horizontal: false,
        required: true,
                }],    
    button_label: 'Continuar'};
  var if_psan = {
   timeline : [psan],   
   conditional_function: function(){
      if ((jsPsych.data.get().first(4).values()[3]['responses'].indexOf('Psicoanálisis') >= 0)){
        return true;
      } else {
        return false;
      }}};
  

  var hum = {
    type: 'survey-multi-select',
    preamble : '',
    questions: [{
        prompt: '',
        options: ["Gestalt", "Terapia Basada en el Cliente", "Counseling", "Coaching", "Otra"],
        horizontal: false,
        required: true}],    
    button_label: 'Continuar'};  
  var if_hum = {
   timeline : [hum],   
   conditional_function: function(){
      if ((jsPsych.data.get().first(4).values()[3]['responses'].indexOf('Humanista') >= 0)){
        return true;
      } else {
        return false;
      }}};
      
  var ecl = {
    type: 'survey-text',
    questions: [{prompt: 'Por favor, detalle cuáles:', value: '', columns:20, required:true}],
    button_label: 'Continuar'};
  var if_ecl = {
   timeline : [etc],   
   conditional_function: function(){
      if ((jsPsych.data.get().first(4).values()[3]['responses'].indexOf('Ecléctic') >= 0)){
        return true;
      } else {
        return false;
      }}};

  var etc = {
    type: 'survey-text',
    questions: [{prompt: 'Por favor, detalle cuáles otras:', value: '', columns:20, required:true}],
    button_label: 'Continuar'};
  var if_etc = {
   timeline : [etc],   
   conditional_function: function(){
      if ((jsPsych.data.get().first(4).values()[3]['responses'].indexOf('Otr') >= 0)){
        return true;
      } else {
        return false;
      }}};
      
  // Workplace
  var workplace_ticks = {
    type: 'survey-multi-select',
    preamble: '',
    questions: [{
        prompt: "Contexto de trabajo", 
        options: ["Público", "Privado", "Obra Social", "Otro"], 
        horizontal: false,
        required: true,
      }],
    button_label: 'Continuar'};
  var otro = {
    type: 'survey-text',
    questions: [{prompt: "Por favor, detalle:", value: '', columns: 10,required:true}],
    button_label: 'Continuar'};
  var if_otro = {
   timeline : [otro],   
   conditional_function: function(){
      if ((jsPsych.data.get().last(1).values()[0]['responses'].indexOf('Otr') >= 0)){
        return true;
      } else {
        return false;
      }}};
 
  // Influence     
  scale = ["No influyó para nada", "A veces", "Influyó totalmente"]
  var influence = {
    type: 'survey-multi-choice',
    preamble: 'Qué tanto influyeron los siguientes factores a la hora de elegir tu orientación teórica?',
    questions: [{prompt:'Evidencia científica', options: scale, horizontal:true, required:true},
		{prompt:'Experiencia personal con pacientes', options: scale, horizontal:true, required:true},
		{prompt:'Entrenamiento clínico', options: scale, horizontal:true, required:true},
		{prompt:'La preferencia de los clientes por el tratamiento', options: scale, horizontal:true, required:true},
		{prompt:'Intuición', options: scale, horizontal:true, required:true},
		{prompt:'Terapia personal', options: scale, horizontal:true, required:true}],
    randomize_question_order : true,
    button_label: 'Continuar',
  };
      
  // Sources
  scale = ["Nunca", "A veces", "Siempre"]
  var sources = {
    type: 'survey-multi-choice',
    preamble: 'Qué fuentes utilizás actualmente para mejorar tus habilidades y efectividad en la clínica?',
    questions: [{prompt:'Experiencia personal con pacientes', options: scale, horizontal:true, required:true},
		{prompt:'Investigación empírica con ensayos controlados', options: scale, horizontal:true, required:true},
		{prompt:'Supervisión', options: scale, horizontal:true, required:true},
		{prompt:'Investigación empírica de estudios de caso', options: scale, horizontal:true, required:true},
		{prompt:'Discusión de pares', options: scale, horizontal:true, required:true},
		{prompt:'Libros populares', options: scale, horizontal:true, required:true},
		{prompt:'Observaciones de casos clínicos', options: scale, horizontal:true, required:true},
		{prompt:'Medidas de resultado', options: scale, horizontal:true, required:true},
		{prompt:'Guías o manuales clínicos', options: scale, horizontal:true, required:true}],
    randomize_question_order : true,
    button_label: 'Continuar',
  };
      
  // Research Attitudes
  scale = ["Fuertemente en desacuerdo", "Neutral", "Fuertemente de acuerdo"]
  var research_attitudes_1 = {
    type: 'survey-multi-choice',
    preamble: '',
    questions: [{prompt:'Estoy dispuesto a utilizar nuevos y diferentes tipos de terapia desarrollados por investigadores', options: scale, horizontal:true, required:true},
		{prompt:'Mis pacientes son más complejos y diversos que los de los ensayos clínicos', options: scale, required:true},
		{prompt:'Es mi deber profesional estar al día con los nuevos desarrollos en la investigación clínica', options: scale, required:true},
		{prompt:'Mis pacientes prefieren otros tratamientos que tratamientos basados ??en evidencia', options: scale, required:true},
		{prompt:'Mi entrenamiento enfatizó los hallazgos de la investigación', options: scale, xrequired:true},
		{prompt:'La terapia no puede ser manualizada', options: scale, horizontal:true, required:true},
		{prompt:'Mis supervisores requieren que use tratamientos basados ??en evidencia', options: scale, required:true},
		{prompt:'Los diagnósticos utilizados en los ensayos clínicos son demasiado simples', options: scale, required:true},
		{prompt:'Los tratamientos basados ??en la evidencia son económicos', options: scale, required:true},
		{prompt:'Los tratamientos que prefiero no se han probado en un ensayo controlado aleatorio', options: scale, required:true},
		{prompt:'Puedo atraer nuevos pacientes aprendiendo un tratamiento basado en evidencia', options: scale, required:true},
		{prompt:'Tengo un enfoque de tratamiento individual para cada paciente', options: scale, required:true}],
    randomize_question_order : true,
    horizontal:true,
    button_label: 'Continue',
	};
  var research_attitudes_2 = {
    type: 'survey-multi-choice',
    preamble: '',
    questions: [{prompt:'Es importante incorporar los hallazgos científicos en mi práctica diaria', options: scale, required:true},
		{prompt:'No tengo tiempo para aprender tratamientos basados ??en evidencia', options: scale, required:true},
		{prompt:'Intentaría una nueva terapia incluso si fuera muy diferente de lo que estoy acostumbrado a hacer', options: scale, required:true},
		{prompt:'La capacitación en tratamientos basados ??en evidencia me costaría demasiado dinero personalmente', options: scale, required:true},
		{prompt:'Estoy interesado en aprender tratamientos basados ??en evidencia', options: scale, required:true},
		{prompt:'No sé qué tratamientos están basados ??en evidencia', options: scale, required:true},
		{prompt:'Los tratamientos que uso con mis clientes tienen una base empírica', options: scale, required:true},
		{prompt:'Mi entrenamiento clínico no proporcionó información suficiente sobre tratamientos basados ??en evidencia', options: scale, required:true},
		{prompt:'La alianza terapéutica es más importante que aprender a hacer una forma específica de psicoterapia', options: scale, required:true},
		{prompt:'La mayoría de las terapias son igualmente efectivas', options: scale, required:true},
		{prompt:'Mi empleador no tiene los fondos para capacitación en tratamientos basados ??en evidencia', options: scale, required:true},
		{prompt:'La experiencia clínica es más importante como guía para el tratamiento que la evidencia de investigación', options: scale, required:true}],
    horizontal: true,    
    randomize_question_order : true,
    button_label: 'Terminar',
	};

  var date = Date().toString();
  var ec2url = "https://ec2-18-219-140-249.us-east-2.compute.amazonaws.com/postdata"
	
  jsPsych.init({
    timeline: [welcome, consent, demography, theoretical_orientation_ticks, if_tcc, if_psan, if_hum, if_etc,
               workplace_ticks, if_otro, influence, sources, research_attitudes_1, research_attitudes_2],

    on_finish: function() { $.ajax({
                        type: "POST",
                        data: {'data' : JSON.stringify(jsPsych.data.get().json())},
                        url: ec2url,
                        headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'},
                        async:false,
                        }); 
			window.location = 'https://www.instagram.com/neurotransmitiendo/'
                        },
              });

</script>
</html>


